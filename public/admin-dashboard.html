<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - WebRTC Analytics</title>
    <link rel="stylesheet" href="admin-style.css">
</head>
<body>
    <div class="admin-container">
        <!-- Header -->
        <header class="admin-header">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    <h1>Admin Analytics</h1>
                </div>
                <div class="header-actions">
                    <button class="refresh-btn" onclick="refreshData()" title="Refresh">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 4v6h-6M1 20v-6h6"/>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                        </svg>
                    </button>
                    <button class="export-btn" onclick="exportData()" title="Export Data">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </button>
                    <button class="logout-btn" onclick="logout()" title="Logout">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16 17 21 12 16 7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                    </button>
                    <div class="status-indicator" id="status">
                        <span class="pulse"></span>
                        <span class="status-text">Live</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Stats Grid -->
        <section class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon connections">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <h3 class="stat-label">Total Connections</h3>
                    <div class="stat-value" id="totalConnections">0</div>
                    <div class="stat-change positive">All time</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon users">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <h3 class="stat-label">Unique Users</h3>
                    <div class="stat-value" id="uniqueUsers">0</div>
                    <div class="stat-change">All time</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon online">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <circle cx="12" cy="12" r="10"/>
                        <circle cx="12" cy="12" r="3" fill="white"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <h3 class="stat-label">Online Now</h3>
                    <div class="stat-value" id="currentOnline">0</div>
                    <div class="stat-change positive">Active</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon messages">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <h3 class="stat-label">Total Messages</h3>
                    <div class="stat-value" id="totalMessages">0</div>
                    <div class="stat-change">Exchanged</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon rooms">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <h3 class="stat-label">Total Rooms</h3>
                    <div class="stat-value" id="totalRooms">0</div>
                    <div class="stat-change">Created</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon peak">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <h3 class="stat-label">Peak Concurrent</h3>
                    <div class="stat-value" id="peakConcurrent">0</div>
                    <div class="stat-change">Max users</div>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <div class="content-grid">
            <!-- Current Online Users -->
            <section class="panel online-panel">
                <div class="panel-header">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                            <circle cx="12" cy="12" r="3" fill="white"/>
                        </svg>
                        Online Users
                    </h2>
                    <span class="badge" id="onlineCount">0</span>
                </div>
                <div class="panel-content">
                    <div class="users-list" id="onlineUsersList">
                        <div class="empty-state">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                <circle cx="9" cy="7" r="4"/>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                            </svg>
                            <p>No users online</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Active Rooms -->
            <section class="panel rooms-panel">
                <div class="panel-header">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2V4zm6 9l-4 5h12l-3-4-2.03 2.71L10 13zm7-4.5c0-.83-.67-1.5-1.5-1.5S10 7.67 10 9.5s.67 1.5 1.5 1.5S17 10.33 17 8.5zM20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2zm0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2v7zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4v-7z"/>
                        </svg>
                        Active Rooms
                    </h2>
                    <span class="badge" id="roomsCount">0</span>
                </div>
                <div class="panel-content">
                    <div class="rooms-list" id="roomsList">
                        <div class="empty-state">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                                <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
                                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                            </svg>
                            <p>No active rooms</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Recent Activity -->
            <section class="panel activity-panel">
                <div class="panel-header">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
                        </svg>
                        Recent Activity
                    </h2>
                </div>
                <div class="panel-content">
                    <div class="activity-list" id="activityList">
                        <div class="empty-state">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                            <p>No recent activity</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Visitor History -->
        <section class="panel history-panel">
            <div class="panel-header">
                <h2>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
                    </svg>
                    Visitor History (Room Joins Only)
                </h2>
                <span class="badge" id="historyCount">0</span>
            </div>
            <div class="panel-content">
                <div class="history-list" id="historyList">
                    <div class="empty-state">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        <p>No visitor history</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Last Updated -->
        <footer class="admin-footer">
            <p>Last updated: <span id="lastUpdated">Never</span></p>
            <p>Auto-refresh: <span id="autoRefresh">ON (5s)</span></p>
        </footer>
    </div>

    <script src="admin-script.js"></script>
</body>
</html>
